#!/usr/bin/env ruby

$stdout.sync = $stderr.sync = true

require "bundler/setup"
Bundler.require

require_relative "../lib/black_swan"

# initialization/configuration
DB = Sequel.connect(BlackSwan::Config.database_url)

spiders = [
  BlackSwan::Spiders::Goodreads,
  BlackSwan::Spiders::Twitter,
]

spiders.each do |spider|
  Timeout.timeout(60) do
    puts "running=#{spider.name}"
    spider.new.run
  end
end
